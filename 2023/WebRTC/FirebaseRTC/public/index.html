<!DOCTYPE html>
<html>

<head>
    <title>WebRTC Chat</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/webrtc/84.0.1265/webrtc.min.js"></script>
</head>

<body>
    <video id="localVideo" autoplay muted></video>
    <video id="remoteVideo"></video>

    <script>
        var localPeerConnection = new RTCPeerConnection();
        var remotePeerConnection = new RTCPeerConnection();

        localPeerConnection.addStream(navigator.getUserMedia({ video: true }));

        remotePeerConnection.ontrack = function (event) { remoteVideo.srcObject = event.streams[0]; };

        localPeerConnection.createOffer(function (offer) {
            localPeerConnection.setLocalDescription(offer);
            remotePeerConnection.setRemoteDescription(offer);
            remotePeerConnection.createAnswer(function (answer) {
                remotePeerConnection.setRemoteDescription(answer);
                var dataChannel = localPeerConnection.createDataChannel("chat");
                dataChannel.onmessage = function (event) { console.log("Received message from remote peer: " + event.data); };
                dataChannel.send("Hello from local peer!");
            });
        });
        remotePeerConnection.onicecandidate = function (event) {
            if (event.candidate) {
                localPeerConnection.addIceCandidate(event.candidate);
            }
        };
    </script>

</body>

</html>