# ソフトウェア設計

## 5.1. データベース設計 (Firestore)
- **コレクション**: `addressbook`
- **ドキュメント構造**:
    ```json
    {
      "name": "String (Document IDとしても使用)",
      "email": "String",
      "timestamp": "ServerTimestamp"
    }
    ```
## 5.2. データ転送
- アドレス取得データ単位
  - ターミナル画面サイズから算出
  - 一度の取得数が小さいと回数が増えるため通信回数が増加
  - 一度の取得数が大きいと表示する以上に取得する場合があり無駄が多い
- 表示画面サイズから表示可能なアイテム数nAddressを採取
  - nAddressぶんのバッファをメモリに確保
- スクロールや画面サイズ変更などで表示範囲が変化し、表示のために新たなアドレス情報が必要になった場合にクエリ実施(startAfter,starBefore使用)

## ログ・デバッグ
- **ファイル出力**: `app.log` 形式のファイルに実行ログを記録。
- **例外処理**: 致命的なエラー発生時はスタックトレースをログに記録し、安全に終了またはエラーを通知する。
